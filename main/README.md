This is the main code of program. 

The program was written in main.c and stm32f3xx_it.c, everything else is auto generated by Cube MX.

I made sure to provide sufficient comments on every part to make it clear and understandable.